<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SilverCare é•·è€…ç½é›£æ‡‰æ€¥å­¸ç¿’å¹³å°</title>
    <style>
        /* --- å…¨å±€è®Šæ•¸ï¼šå¾ PDF æå–çš„é…è‰² --- */
        :root {
            --header-bg: #2c3e50; /* æ·±è—è‰²é ‚éƒ¨ */
            --header-text: #ffffff;
            --bg-color: #f0f2f5;
            --panel-bg: #ffffff;
            --danger-text: #c0392b; /* é«˜å±ç´…è‰² */
            --accent-green: #27ae60; /* æ­£ç¢º/æŒ‰éˆ•ç¶  */
            --accent-blue: #2980b9; /* ä¸‹ä¸€æ­¥æŒ‰éˆ•è— */
            --accent-orange: #e67e22; /* æš«åœ/é‡ç½®æ©™ */
            --text-main: #333;
            --border-radius: 8px;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- é ‚éƒ¨æ¨™é¡Œåˆ— (åƒè€ƒ PDF p.17) --- */
        header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 10;
        }

        .header-title { font-size: 1.4rem; font-weight: bold; letter-spacing: 1px; }
        .emergency-call { color: #ff6b6b; font-weight: bold; font-size: 1.2rem; }
        .header-btns button {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.4);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            margin-left: 10px;
        }

        /* --- ä¸»ä½ˆå±€å€åŸŸ (Grid System) --- */
        .main-container {
            display: grid;
            grid-template-columns: 250px 1fr 250px; /* å·¦å´æ¬„ - ä¸­é–“å…§å®¹ - å³å´æ¬„ */
            gap: 20px;
            padding: 20px;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
        }

        /* é€šç”¨å¡ç‰‡æ¨£å¼ */
        .panel {
            background: var(--panel-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }

        /* --- å·¦å´ï¼šè¨“ç·´ç‹€æ…‹ --- */
        .status-panel h3 { margin-top: 0; color: #7f8c8d; font-size: 1rem; }
        .status-item { margin-bottom: 25px; }
        .label { font-size: 0.9rem; color: #95a5a6; margin-bottom: 5px; display: block; }
        .value { font-size: 1.2rem; font-weight: bold; color: var(--text-main); }
        .danger-high { color: var(--danger-text); font-size: 1.4rem; }
        
        .progress-bar-bg {
            background: #ecf0f1;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }
        .progress-bar-fill {
            background: #3498db;
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        /* --- ä¸­é–“ï¼šå ´æ™¯èˆ‡äº’å‹• --- */
        .game-panel {
            position: relative;
            background: #fff;
            border-top: 5px solid #e74c3c; /* PDF ä¸­çš„ç´…è‰²é ‚æ¢ */
            display: flex;
            flex-direction: column;
        }

        .scene-header {
            background: #e74c3c;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            margin: -20px -20px 20px -20px;
            border-radius: 5px 5px 0 0;
        }

        /* åœ–ç‰‡å®¹å™¨ */
        .scene-display {
            flex: 1;
            background: #eee;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .scene-display img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* ç¢ºä¿å®Œæ•´é¡¯ç¤º PDF æˆªåœ– */
            background-color: #333;
        }

        /* ç–ŠåŠ å±¤ (ç¶ è‰²å‹¾å‹¾/ç´…è‰²å‰å‰) - åƒè€ƒ PDF p.17 */
        .overlay-feedback {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.4);
            display: none; /* é è¨­éš±è— */
            justify-content: center;
            align-items: center;
            z-index: 5;
        }
        .big-icon {
            font-size: 15rem; /* è¶…å¤§åœ–æ¨™ */
            font-weight: bold;
            opacity: 0.9;
        }
        .tick { color: #2ecc71; text-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .cross { color: #e74c3c; text-shadow: 0 0 20px rgba(0,0,0,0.5); }

        /* å•é¡Œèˆ‡æŒ‰éˆ•å€ */
        .interaction-area {
            margin-top: 20px;
        }
        .question-text {
            background: #fdf2f2; /* æ·ºç´…èƒŒæ™¯ */
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-size: 1.1rem;
            line-height: 1.5;
            border-left: 5px solid #e74c3c;
        }
        .options-row {
            display: flex;
            gap: 15px;
        }
        .btn-option {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 30px; /* åœ“è§’æŒ‰éˆ• */
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 0 rgba(0,0,0,0.2);
        }
        .btn-option:active { transform: translateY(4px); box-shadow: none; }
        
        /* æ ¹æ“š PDF é…è‰² */
        .btn-green { background-color: var(--accent-green); }
        .btn-blue { background-color: var(--accent-blue); }
        .btn-orange { background-color: var(--accent-orange); }

        /* --- å³å´ï¼šåˆ†æ•¸èˆ‡æç¤º --- */
        .score-display {
            text-align: center;
            margin-bottom: 30px;
        }
        .score-number {
            font-size: 3.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        .score-total { font-size: 1.2rem; color: #95a5a6; }

        .badges-list { margin-top: 20px; }
        .badge-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            opacity: 0.3; /* æœªç²å¾—æ™‚é€æ˜ */
            transition: opacity 0.5s;
        }
        .badge-item.earned { opacity: 1; }
        .badge-icon { font-size: 1.5rem; margin-right: 10px; }

        /* é»ƒè‰²æç¤ºæ¡† (åƒè€ƒ PDF p.17 å³ä¸‹è§’) */
        .tip-box {
            background: #fff9c4;
            border: 2px solid #f1c40f;
            padding: 15px;
            border-radius: 10px;
            margin-top: auto; /* æ¨åˆ°åº•éƒ¨ */
            display: flex;
            align-items: center;
        }
        .tip-icon { font-size: 2rem; margin-right: 10px; color: #d35400; }
        .tip-text { font-weight: bold; color: #7f8c8d; font-size: 0.9rem; }

        /* å°èˆªæŒ‰éˆ•å€ */
        .nav-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        /* --- æ‰‹æ©Ÿé©é… (RWD) --- */
        @media (max-width: 900px) {
            .main-container {
                grid-template-columns: 1fr; /* è®Šå›å–®æ¬„ */
                overflow-y: auto;
            }
            .scene-display { min-height: 250px; }
            .status-panel, .score-panel { flex-direction: row; justify-content: space-between; align-items: center; }
            .score-number { font-size: 2rem; }
            .game-panel { order: -1; } /* æŠŠéŠæˆ²ç•«é¢æ‹‰åˆ°æœ€ä¸Šé¢ */
        }
    </style>
</head>
<body>

    <header>
        <div class="header-title">é•·è€…ç½é›£æ‡‰æ€¥å­¸ç¿’å¹³å° - äº’å‹•æ¨¡æ“¬è¨“ç·´</div>
        <div class="emergency-call">ç·Šæ€¥æ±‚åŠ©ç†±ç·š: 999</div>
        <div class="header-btns" style="display:none"> <button>è¿”å›ä¸»é </button>
            <button>æš«åœè¨“ç·´</button>
        </div>
    </header>

    <div class="main-container">
        
        <div class="panel status-panel">
            <h3>è¨“ç·´ç‹€æ…‹</h3>
            
            <div class="status-item">
                <span class="label">å±éšªç­‰ç´š</span>
                <span class="value danger-high">â–² é«˜å±</span>
            </div>

            <div class="status-item">
                <span class="label">å‰©é¤˜æ™‚é–“</span>
                <span class="value" id="timer">03:00</span>
            </div>

            <div class="status-item">
                <span class="label">å®Œæˆé€²åº¦</span>
                <div class="value" id="progress-text">0%</div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" id="progress-bar"></div>
                </div>
            </div>

            <div style="margin-top:auto">
                <button class="btn-option btn-orange" onclick="location.reload()" style="font-size:0.9rem; padding:10px;">âŸ³ é‡æ–°é–‹å§‹è¨“ç·´</button>
            </div>
        </div>

        <div class="panel game-panel">
            <div class="scene-header" id="level-title">ç«ç½é€ƒç”Ÿæ¨¡æ“¬ - ç¬¬1é—œ</div>
            
            <div class="scene-display">
                <img id="scene-img" src="scene1.jpg" alt="Scene" onerror="this.style.display='none'; this.parentElement.innerText='è«‹æ”¾å…¥åœ–ç‰‡ scene1.jpg'">
                
                <div id="feedback-overlay" class="overlay-feedback">
                    <div id="feedback-icon" class="big-icon"></div>
                </div>
            </div>

            <div class="interaction-area">
                <div class="question-text" id="scenario-text">
                    æƒ…å¢ƒæè¿°ï¼šæ‚¨åœ¨å®¶ä¸­å®¢å»³ä¼‘æ¯æ™‚ï¼Œçªç„¶ç™¼ç¾å»šæˆ¿å‚³å‡ºæ¿ƒç…™...
                </div>
                
                <div class="options-row" id="options-container">
                    <button class="btn-option btn-green">é¸é … A</button>
                    <button class="btn-option btn-green">é¸é … B</button>
                </div>

                <div class="nav-controls" id="nav-controls" style="display:none;">
                    <button class="btn-option btn-green" onclick="showAnswerDetails()">æŸ¥çœ‹æ­£ç¢ºç­”æ¡ˆ</button>
                    <button class="btn-option btn-blue" onclick="nextScene()">ä¸‹ä¸€å€‹å ´æ™¯ â†’</button>
                </div>
            </div>
        </div>

        <div class="panel score-panel">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <button style="border:1px solid #ddd; background:none; padding:5px; border-radius:5px;">ğŸ”Š èªéŸ³</button>
                <button style="border:1px solid #ddd; background:none; padding:5px; border-radius:5px;">Aa å­—é«”</button>
            </div>

            <div class="score-display" style="margin-top:20px;">
                <span class="label">å®‰å…¨åˆ†æ•¸</span>
                <div class="score-number" id="score-val">0</div>
                <span class="score-total">/ 100</span>
            </div>

            <div class="badges-list">
                <span class="label">ç²å¾—å¾½ç« </span>
                <div class="badge-item" id="badge-calm">
                    <span class="badge-icon">ğŸ†</span>
                    <span>å†·éœæ‡‰å°</span>
                </div>
                <div class="badge-item" id="badge-fast">
                    <span class="badge-icon">âš¡</span>
                    <span>å¿«é€Ÿåæ‡‰</span>
                </div>
                <div class="badge-item" id="badge-perfect">
                    <span class="badge-icon">â­</span>
                    <span>å®Œç¾é€ƒç”Ÿ</span>
                </div>
            </div>

            <div class="tip-box">
                <div class="tip-icon">âš ï¸</div>
                <div class="tip-text">
                    è¨˜ä½ï¼šä¸è¦ä¹˜åé›»æ¢¯ï¼<br>è¦èµ°æ¨“æ¢¯é€ƒç”Ÿï¼
                </div>
            </div>
        </div>

    </div>

<script>
    // --- è³‡æ–™çµæ§‹ (å°æ‡‰ PDF å…§å®¹) ---
    const scenarios = [
        {
            // PDF Page 16/17
            id: 1,
            title: "ç«ç½é€ƒç”Ÿæ¨¡æ“¬ - ç¬¬1é—œ: å»šæˆ¿èµ·ç«",
            desc: "æƒ…å¢ƒæè¿°ï¼šæ‚¨åœ¨å®¶ä¸­å®¢å»³ä¼‘æ¯æ™‚ï¼Œçªç„¶ç™¼ç¾å»šæˆ¿å‚³å‡ºæ¿ƒç…™ï¼Œç«å‹¢æ­£åœ¨è”“å»¶ã€‚ç¾åœ¨æ‚¨éœ€è¦åšå‡ºæ­£ç¢ºçš„æ±ºå®šä¾†ä¿è­·è‡ªå·±çš„å®‰å…¨ã€‚",
            img: "scene1.jpg",
            options: [
                { text: "ç«‹åˆ»æ’¥æ‰“999ä¸¦æº–å‚™èµ°ä½¬è¢‹", correct: true },
                { text: "å»å»šæˆ¿æŸ¥çœ‹ç«å‹¢ä¸¦è©¦åœ–æ»…ç«", correct: false }
            ]
        },
        {
            // PDF Page 18/19
            id: 2,
            title: "ç«ç½é€ƒç”Ÿæ¨¡æ“¬ - ç¬¬2é—œ: æº–å‚™é€ƒç”Ÿ",
            desc: "æº–å‚™é€ƒç”Ÿï¼Œé¢å°ç·Šé–‰çš„æˆ¿é–€ï¼Œæ‚¨æ‡‰è©²å¦‚ä½•æª¢æŸ¥ï¼Ÿ",
            img: "scene2.jpg",
            options: [
                { text: "ç”¨æ‰‹èƒŒè©¦æ¢é–€æŠŠæ‰‹æº«åº¦", correct: true },
                { text: "ç›´æ¥æ‰“é–‹é–€æŸ¥çœ‹æƒ…æ³", correct: false }
            ]
        },
        {
            // PDF Page 20/21
            id: 3,
            title: "ç«ç½é€ƒç”Ÿæ¨¡æ“¬ - ç¬¬3é—œ: é¸æ“‡è·¯ç·š",
            desc: "æ¨“æ¢¯é–“æœ‰å…©æ¢é€šé“ï¼Œä¸€æ¢å……æ»¿ç…™éœ§ä½†è¼ƒè¿‘ï¼Œå¦ä¸€æ¢ç„¡ç…™ä½†è¼ƒé ã€‚é¸æ“‡å“ªæ¢é€ƒç”Ÿé€šé“ï¼Ÿ",
            img: "scene3.jpg",
            options: [
                { text: "é›¢æˆ‘é ä½†æ˜¯æ²’æœ‰ç…™éœ§çš„", correct: true },
                { text: "é›¢æˆ‘è¿‘ä½†æ˜¯æœ‰ç…™éœ§çš„", correct: false }
            ]
        },
        {
            // PDF Page 22/23
            id: 4,
            title: "ç«ç½é€ƒç”Ÿæ¨¡æ“¬ - ç¬¬4é—œ: å®¤å…§é¿éšª",
            desc: "å¦‚ç„¡æ³•é€ƒå‡ºè¢«å›°å®¤å…§ï¼Œæ‚¨æœƒæ€éº¼åšï¼Ÿ",
            img: "scene5.jpg",
            options: [
                { text: "å ±è­¦ä¸¦æ®èˆé®®è±”è¡£ç‰©/å…‰æº", correct: true },
                { text: "éš”å£ç„¡ç«ï¼Œè©¦è©¦å¾çª—å¤–çˆ¬éå»", correct: false }
            ]
        }
    ];

    let currentStep = 0;
    let score = 0;
    let timeLeft = 165; // 02:45
    let timerInterval;

    // DOM å…ƒç´ 
    const elScore = document.getElementById('score-val');
    const elTimer = document.getElementById('timer');
    const elProgressText = document.getElementById('progress-text');
    const elProgressBar = document.getElementById('progress-bar');
    const elSceneImg = document.getElementById('scene-img');
    const elScenarioText = document.getElementById('scenario-text');
    const elLevelTitle = document.getElementById('level-title');
    const elOptionsContainer = document.getElementById('options-container');
    const elNavControls = document.getElementById('nav-controls');
    const elFeedbackOverlay = document.getElementById('feedback-overlay');
    const elFeedbackIcon = document.getElementById('feedback-icon');

    // åˆå§‹åŒ–
    function initGame() {
        renderScene();
        startTimer();
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            timeLeft--;
            let m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
            let s = (timeLeft % 60).toString().padStart(2, '0');
            elTimer.innerText = `${m}:${s}`;
            if(timeLeft <= 0) clearInterval(timerInterval);
        }, 1000);
    }

    function renderScene() {
        if (currentStep >= scenarios.length) {
            showEndScreen();
            return;
        }

        const data = scenarios[currentStep];
        
        // æ›´æ–°ç•Œé¢æ–‡å­—èˆ‡åœ–ç‰‡
        elLevelTitle.innerText = data.title;
        elScenarioText.innerText = data.desc;
        elSceneImg.src = data.img;
        elSceneImg.style.display = 'block'; // é‡ç½®åœ–ç‰‡é¡¯ç¤º
        
        // æ›´æ–°é€²åº¦æ¢
        let progress = Math.round((currentStep / scenarios.length) * 100);
        elProgressText.innerText = `${progress}%`;
        elProgressBar.style.width = `${progress}%`;

        // é‡ç½®æŒ‰éˆ•å€
        elOptionsContainer.style.display = 'flex';
        elNavControls.style.display = 'none';
        elFeedbackOverlay.style.display = 'none';

        // ç”ŸæˆæŒ‰éˆ•
        elOptionsContainer.innerHTML = '';
        data.options.forEach((opt, index) => {
            let btn = document.createElement('button');
            btn.className = 'btn-option btn-green';
            btn.innerText = opt.text;
            btn.onclick = () => handleChoice(opt.correct);
            elOptionsContainer.appendChild(btn);
        });
    }

    function handleChoice(isCorrect) {
        // é¡¯ç¤ºåé¥‹ (å‹¾å‹¾æˆ–å‰å‰)
        elFeedbackOverlay.style.display = 'flex';
        
        if (isCorrect) {
            elFeedbackIcon.innerHTML = 'âœ”'; // PDF ä¸­çš„ç¶ è‰²å¤§å‹¾
            elFeedbackIcon.className = 'big-icon tick';
            score += 25; // 4é—œï¼Œæ»¿åˆ†100
            elScore.innerText = score;
            updateBadges();
        } else {
            elFeedbackIcon.innerHTML = 'âœ˜'; // PDF ä¸­çš„ç´…è‰²å¤§å‰
            elFeedbackIcon.className = 'big-icon cross';
        }

        // åˆ‡æ›åˆ°åº•éƒ¨å°èˆª
        elOptionsContainer.style.display = 'none';
        elNavControls.style.display = 'flex';
    }

    function updateBadges() {
        // ç°¡å–®é‚è¼¯ï¼šåˆ†æ•¸å¤ é«˜å°±äº®èµ·å¾½ç« 
        if (score >= 25) document.getElementById('badge-calm').classList.add('earned');
        if (score >= 75 && timeLeft > 100) document.getElementById('badge-fast').classList.add('earned');
        if (score >= 100) document.getElementById('badge-perfect').classList.add('earned');
    }

    function nextScene() {
        currentStep++;
        renderScene();
    }
    
    function showAnswerDetails() {
        alert("é€™è£¡æœƒé¡¯ç¤º PDF ä¸­çš„è©³ç´°è‡ªæ•‘ç§‘æ™®è¬›è§£ (Source: 85)");
    }

    function showEndScreen() {
        // é¡¯ç¤ºæˆåŠŸç•«é¢ (PDF p.24)
        elLevelTitle.innerText = "è¨“ç·´çµæŸ";
        elScenarioText.innerHTML = `<h2 style="color:#27ae60">é€ƒç”ŸæˆåŠŸï¼</h2><p>æ‚¨å·²å®Œæˆæ‰€æœ‰æ¨¡æ“¬è¨“ç·´ã€‚</p>`;
        elSceneImg.src = "success.jpg";
        elOptionsContainer.innerHTML = `<button class="btn-option btn-orange" onclick="location.reload()">é‡æ–°é–‹å§‹è¨“ç·´</button>`;
        elOptionsContainer.style.display = 'block';
        elNavControls.style.display = 'none';
        elFeedbackOverlay.style.display = 'none';
        
        // æ»¿é€²åº¦
        elProgressText.innerText = "100%";
        elProgressBar.style.width = "100%";
        clearInterval(timerInterval);
    }

    // å•Ÿå‹•
    initGame();

</script>
</body>
</html>