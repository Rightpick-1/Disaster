<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training Progress - SilverCare Platform</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="icons.css">
    <script src="language.js"></script>
</head>
<body>
    <!-- Main Content Wrapper -->
    <div class="main-wrapper no-sidebar">
        <!-- Platform Header -->
        <header class="platform-header">
            <h1 class="header-title" data-i18n="platformTitle">SilverCare Disaster Emergency Learning Platform</h1>
            <div class="header-right">
                <div class="language-switcher">
                    <button class="language-button" onclick="setLanguage('en')" title="English">
                        <span>EN</span>
                    </button>
                    <button class="language-button" onclick="setLanguage('zh_TW')" title="繁體中文">
                        <span>繁</span>
                    </button>
                </div>
                <button class="notification-button">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                    <span class="notification-dot"></span>
                </button>
                <button class="user-button">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content progress-content">
            <!-- Back to Home Link -->
            <a href="index.html" class="back-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                <span data-i18n="backToHome">Back to Home</span>
            </a>

            <!-- Page Title -->
            <div class="progress-header">
                <h2 class="progress-title" data-i18n="trainingProgress">Training Progress</h2>
                <p class="progress-subtitle" data-i18n="trackPerformance">Track your disaster preparedness training performance.</p>
            </div>

            <!-- In Progress Section -->
            <div class="in-progress-section">
                <h3 class="in-progress-title" data-i18n="inProgress">In Progress</h3>
                <p class="in-progress-description" data-i18n="oneModuleCompleted">One module completed. Continue with the remaining training to build comprehensive emergency preparedness.</p>
                
                <!-- Summary Cards -->
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="summary-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="12" cy="12" r="10"/>
                                <circle cx="12" cy="12" r="6"/>
                                <circle cx="12" cy="12" r="2"/>
                            </svg>
                        </div>
                        <div class="summary-value" id="completedCount">0/2</div>
                        <div class="summary-label" data-i18n="completed">Completed</div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                            </svg>
                        </div>
                        <div class="summary-value" id="averageScore">0%</div>
                        <div class="summary-label" data-i18n="averageScore">Average Score</div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                            </svg>
                        </div>
                        <div class="summary-value" id="totalPoints">0</div>
                        <div class="summary-label" data-i18n="totalPoints">Total Points</div>
                    </div>
                    
                    <div class="summary-card">
                        <div class="summary-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                        </div>
                        <div class="summary-value" id="totalAttempts">0</div>
                        <div class="summary-label" data-i18n="totalAttempts">Total Attempts</div>
                    </div>
                </div>
            </div>

            <!-- Training Modules Section -->
            <div class="training-modules-section">
                <h3 class="modules-section-title" data-i18n="trainingModulesSection">Training Modules</h3>
                
                <div class="modules-list">
                    <!-- Fire Escape Simulation Module -->
                    <div class="progress-module-card">
                        <div class="module-icon-progress">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.59 2.65.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"/>
                            </svg>
                        </div>
                        <div class="module-info-progress">
                            <h4 class="module-title-progress" data-i18n="fireEscapeSimulation">Fire Escape Simulation</h4>
                            <div class="module-details-progress">
                                <div class="module-detail-row">
                                    <span class="detail-label-progress" data-i18n="status">Status:</span>
                                    <span class="detail-value-progress status-not-started" id="fireEscapeStatusProgress">
                                        <span data-i18n="notStarted">Not Started</span>
                                    </span>
                                </div>
                                <div class="module-detail-row" id="fireEscapeScoreRow" style="display: none;">
                                    <span class="detail-label-progress" data-i18n="bestScore">Best Score:</span>
                                    <span class="detail-value-progress" id="fireEscapeBestScoreProgress">0/100</span>
                                </div>
                                <div class="module-detail-row" id="fireEscapeAttemptsRow" style="display: none;">
                                    <span class="detail-label-progress" data-i18n="attempts">Attempts:</span>
                                    <span class="detail-value-progress" id="fireEscapeAttemptsProgress">0</span>
                                </div>
                                <div class="module-detail-row" id="fireEscapePerformanceRow" style="display: none;">
                                    <span class="detail-label-progress" data-i18n="performance">Performance:</span>
                                    <div class="performance-bar">
                                        <div class="performance-fill" id="fireEscapePerformanceFill" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency Bag Packing Module -->
                    <div class="progress-module-card">
                        <div class="module-icon-progress">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17 6h-2V4c0-1.1-.9-2-2-2H9c-1.1 0-2 .9-2 2v2H5c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM9 4h4v2H9V4zm8 15H5V8h2v1c0 .6.4 1 1 1s1-.4 1-1V8h4v1c0 .6.4 1 1 1s1-.4 1-1V8h2v11z"/>
                            </svg>
                        </div>
                        <div class="module-info-progress">
                            <h4 class="module-title-progress" data-i18n="emergencyBagPacking">Emergency Bag Packing</h4>
                            <div class="module-details-progress">
                                <div class="module-detail-row">
                                    <span class="detail-label-progress" data-i18n="status">Status:</span>
                                    <span class="detail-value-progress status-not-started" id="bagStatusProgress">
                                        <span data-i18n="notStarted">Not Started</span>
                                    </span>
                                </div>
                                <div class="module-detail-row" id="bagScoreRow" style="display: none;">
                                    <span class="detail-label-progress" data-i18n="bestScore">Best Score:</span>
                                    <span class="detail-value-progress" id="bagBestScoreProgress">0/100</span>
                                </div>
                                <div class="module-detail-row" id="bagAttemptsRow" style="display: none;">
                                    <span class="detail-label-progress" data-i18n="attempts">Attempts:</span>
                                    <span class="detail-value-progress" id="bagAttemptsProgress">0</span>
                                </div>
                                <div class="module-detail-row" id="bagPerformanceRow" style="display: none;">
                                    <span class="detail-label-progress" data-i18n="performance">Performance:</span>
                                    <div class="performance-bar">
                                        <div class="performance-fill" id="bagPerformanceFill" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Training Best Practices Section -->
            <div class="best-practices-section">
                <h3 class="practices-title" data-i18n="trainingBestPractices">Training Best Practices</h3>
                <div class="practices-grid">
                    <div class="practice-card">
                        <h4 class="practice-title" data-i18n="practiceRegularly">Practice Regularly</h4>
                        <p class="practice-description" data-i18n="practiceRegularlyDesc">Repetition helps reinforce emergency procedures. Try each module multiple times.</p>
                    </div>
                    <div class="practice-card">
                        <h4 class="practice-title" data-i18n="applyKnowledge">Apply Knowledge</h4>
                        <p class="practice-description" data-i18n="applyKnowledgeDesc">Use this training to prepare your home. Create escape plans and pack an emergency bag.</p>
                    </div>
                    <div class="practice-card">
                        <h4 class="practice-title" data-i18n="reviewFeedback">Review Feedback</h4>
                        <p class="practice-description" data-i18n="reviewFeedbackDesc">Understanding why certain choices are safer helps you make better decisions.</p>
                    </div>
                    <div class="practice-card">
                        <h4 class="practice-title" data-i18n="setGoals">Set Goals</h4>
                        <p class="practice-description" data-i18n="setGoalsDesc">Aim for 90% or higher on all modules to ensure comprehensive preparedness.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
    <script>
        // Load and display progress
        function loadProgress() {
            // Get completion status
            const fireEscapeCompletion = parseInt(localStorage.getItem('fireEscapeCompletion') || '0');
            const bagCompletion = parseInt(localStorage.getItem('bagTrainingCompletion') || '0');
            
            // Calculate completed count
            let completedCount = 0;
            if (fireEscapeCompletion >= 100) completedCount++;
            if (bagCompletion >= 100) completedCount++;
            
            document.getElementById('completedCount').textContent = `${completedCount}/2`;
            
            // Get scores
            const fireEscapeBestScore = parseInt(localStorage.getItem('fireEscapeBestScore') || '0');
            const bagBestScore = parseInt(localStorage.getItem('bagBestScore') || '0');
            
            // Calculate average score
            let totalScore = 0;
            let scoreCount = 0;
            if (fireEscapeBestScore > 0) {
                totalScore += fireEscapeBestScore;
                scoreCount++;
            }
            if (bagBestScore > 0) {
                totalScore += bagBestScore;
                scoreCount++;
            }
            const averageScore = scoreCount > 0 ? Math.round(totalScore / scoreCount) : 0;
            document.getElementById('averageScore').textContent = `${averageScore}%`;
            
            // Calculate total points
            const totalPoints = fireEscapeBestScore + bagBestScore;
            document.getElementById('totalPoints').textContent = totalPoints;
            
            // Get attempts
            const fireEscapeAttempts = parseInt(localStorage.getItem('fireEscapeAttempts') || '0');
            const bagAttempts = parseInt(localStorage.getItem('bagAttempts') || '0');
            const totalAttempts = fireEscapeAttempts + bagAttempts;
            document.getElementById('totalAttempts').textContent = totalAttempts;
            
            // Update Fire Escape Simulation module
            if (fireEscapeCompletion >= 100) {
                document.getElementById('fireEscapeStatusProgress').textContent = 'Completed';
                document.getElementById('fireEscapeStatusProgress').className = 'detail-value-progress status-completed';
                document.getElementById('fireEscapeStatusProgress').innerHTML = `
                    <svg class="check-icon-small" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Completed
                `;
                document.getElementById('fireEscapeScoreRow').style.display = 'flex';
                document.getElementById('fireEscapeAttemptsRow').style.display = 'flex';
                document.getElementById('fireEscapePerformanceRow').style.display = 'flex';
                document.getElementById('fireEscapeBestScoreProgress').textContent = `${fireEscapeBestScore}/100`;
                document.getElementById('fireEscapeAttemptsProgress').textContent = fireEscapeAttempts;
                document.getElementById('fireEscapePerformanceFill').style.width = `${fireEscapeBestScore}%`;
            }
            
            // Update Emergency Bag Packing module
            if (bagCompletion >= 100) {
                const statusEl = document.getElementById('bagStatusProgress');
                statusEl.className = 'detail-value-progress status-completed';
                statusEl.innerHTML = `
                    <svg class="check-icon-small" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    <span data-i18n="completed">Completed</span>
                `;
                updatePageLanguage(); // Update the text
                document.getElementById('bagScoreRow').style.display = 'flex';
                document.getElementById('bagAttemptsRow').style.display = 'flex';
                document.getElementById('bagPerformanceRow').style.display = 'flex';
                document.getElementById('bagBestScoreProgress').textContent = `${bagBestScore}/100`;
                document.getElementById('bagAttemptsProgress').textContent = bagAttempts;
                document.getElementById('bagPerformanceFill').style.width = `${bagBestScore}%`;
            }
        }
        
        // Load progress on page load
        window.addEventListener('load', loadProgress);
    </script>
</body>
</html>

